<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰ - å°é©¬å“¥çš„åšå®¢</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="é©¬æ™¯è´ºï¼ˆå°é©¬å“¥ï¼‰"><meta name=description content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰å¹¶åµŒå…¥åˆ° CI/CD ä¸­"><meta name=keywords content="Hugo,theme,even"><meta name=generator content="Hugo 0.79.1 with theme even"><link rel=canonical href=https://majinghe.github.io/devsecops/tekton-generate-sbom/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.c7bc1becf36bcf6a9ebd25d2947e43a2eb745ddb0c9a32b43126fd7fa460c351.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰"><meta property="og:description" content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰å¹¶åµŒå…¥åˆ° CI/CD ä¸­"><meta property="og:type" content="article"><meta property="og:url" content="https://majinghe.github.io/devsecops/tekton-generate-sbom/"><meta property="article:published_time" content="2022-02-08T13:05:42+08:00"><meta property="article:modified_time" content="2022-02-08T13:05:42+08:00"><meta itemprop=name content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰"><meta itemprop=description content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰å¹¶åµŒå…¥åˆ° CI/CD ä¸­"><meta itemprop=datePublished content="2022-02-08T13:05:42+08:00"><meta itemprop=dateModified content="2022-02-08T13:05:42+08:00"><meta itemprop=wordCount content="8646"><meta itemprop=keywords content="Software Supply Chain Security,SBOM,Tekton,"><meta name=twitter:card content="summary"><meta name=twitter:title content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰"><meta name=twitter:description content="ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰å¹¶åµŒå…¥åˆ° CI/CD ä¸­"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>å°é©¬å“¥</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/cloud-native><li class=mobile-menu-item>Cloud Native</li></a><a href=/devsecops><li class=mobile-menu-item>DevSecOps</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><head><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-T0B2C6W2ZH','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','G-T0B2C6W2ZH','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></head></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>ç”¨ Tekton æ¥ç”Ÿæˆè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰</h1><div class=post-meta><span class=post-time>2022-02-08</span><div class=post-category><a href=/categories/devops/>DevOps</a></div><span class=more-meta>çº¦ 8646 å­—</span>
<span class=more-meta>é¢„è®¡é˜…è¯» 18 åˆ†é’Ÿ</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>æ–‡ç« ç›®å½•</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#sbom-çš„ç”Ÿæˆ>SBOM çš„ç”Ÿæˆ</a></li><li><a href=#å°†-sbom-çš„ç”ŸæˆåµŒå…¥åˆ°-cicd-ä¸­>å°† SBOM çš„ç”ŸæˆåµŒå…¥åˆ° CI/CD ä¸­</a><ul><li><a href=#tekton>Tekton</a></li><li><a href=#å°†-sbom-çš„ç”ŸæˆåµŒå…¥-tekton-çš„-cicd-ä¸­>å°† SBOM çš„ç”ŸæˆåµŒå…¥ Tekton çš„ CI/CD ä¸­</a></li></ul></li></ul></li></ul></nav></div></div><div class=post-content><p>è¿‘æœŸ Linux åŸºé‡‘ä¼šå‘å¸ƒäº†ã€Šè½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰ä¸ç½‘ç»œå®‰å…¨å¯è¯»æ€§ã€‹æŠ¥å‘Šï¼Œé‡Œé¢ä»‹ç»äº†è½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆä»¥ä¸‹ç»Ÿç§°ä¸º SBOMï¼‰åœ¨ç°åœ¨ä¼ä¸šä¸­çš„ä½¿ç”¨æƒ…å†µã€‚å¯ä»¥æŸ¥çœ‹<a href=https://linuxfoundation.org/wp-content/uploads/LFResearch_SBOM_Report_020422.pdf>æŠ¥å‘Šå…¨æ–‡</a>ï¼Œä¹Ÿå¯ä»¥é˜…è¯»æœ¬ç«™çš„å¦å¤–ä¸€ç¯‡åšæ–‡<a href=https://majinghe.github.io/Cloud-Native-DevSecOps/devsecops/sbom-report/>ã€Šè½¯ä»¶ç‰©æ–™æ¸…å•ä¸ç½‘ç»œå®‰å…¨å¯è¯»æ€§ã€‹è°ƒç ”æŠ¥å‘Šè§£è¯»</a>æ¥çœ‹ä¸€ä¸‹æŠ¥å‘Šå†…å®¹è§£è¯»ã€‚</p><p>ä¸ç®¡æ˜¯ä»æŠ¥å‘Šè¿˜æ˜¯ä»ç°åœ¨çš„å‘å±•è¶‹åŠ¿çœ‹ï¼Œè½¯ä»¶ä¾›åº”é“¾å®‰å…¨æ”¶åˆ°äº†è¶Šæ¥è¶Šå¤šä¼ä¸šæˆ–ç»„ç»‡çš„é‡è§†ï¼Œè€Œ SBOM è¢«è§†ä¸ºå®è·µä¸å®ç°è½¯ä»¶ä¾›åº”é“¾å®‰å…¨çš„é‡è¦æ‰‹æ®µã€‚å¦‚ä½•æŠŠ SBOM çš„ç”ŸæˆåµŒå…¥åˆ°è½¯ä»¶äº¤ä»˜çš„æµç¨‹ä¸­ï¼ˆè¯¸å¦‚ CI/CDï¼‰ä¹Ÿæ˜¯èƒ½å¤Ÿæ¨å¹¿ SBOM è½åœ°å®è·µçš„ä¸€ä¸ªæœ‰æ•ˆæ‰‹æ®µï¼Œä¸‹é¢å°±æ¼”ç¤ºå¦‚ä½•å°† SBOM åµŒå…¥ DevOps çš„ CI/CD Pipeline ä¸­ã€‚</p><h2 id=sbom-çš„ç”Ÿæˆ>SBOM çš„ç”Ÿæˆ</h2><p>SBOM çš„ç”Ÿæˆæœ‰å¾ˆå¤šå·¥å…·å¯ä»¥æ¥å®ç°ï¼Œå·¥å…·éƒ¨åˆ†å¯ä»¥æŸ¥çœ‹<a href=https://spdx.dev/resources/tools/>è¿™å„¿</a>ã€‚æœ¬æ–‡ä»¥ Anchore å¼€æºçš„ <a href=https://github.com/anchore/syft>syft</a> ä¸ºä¾‹æ¥æ¼”ç¤ºå¦‚ä½•ç”Ÿæˆç‰¹å®šæ ¼å¼çš„ SBOMã€‚</p><p>syft çš„å®‰è£…æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„ OS é‡‡ç”¨ä¸åŒçš„å®‰è£…æ–¹å¼ã€‚ä»¥ macOS ä¸ºä¾‹ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤å³å¯å®Œæˆå®‰è£…ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ brew tap anchore/syft
$ brew install syft
</code></pre></td></tr></table></div></div><p>é€šè¿‡æŸ¥çœ‹ <code>syft</code> çš„ç‰ˆæœ¬æ¥æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ syft version
Application:   syft
Version:       0.21.0
BuildDate:     2021-08-23T18:25:25Z
GitCommit:     ff828fbac211e1d9e993c309461bd9e0636fc2ec
GitTreeState:  clean
Platform:      darwin/amd64
GoVersion:     go1.16.7
Compiler:      gc
</code></pre></td></tr></table></div></div><p>å¯ä»¥ç”¨ <code>syft --help</code> æ¥æŸ¥çœ‹ç”¨æ³•ï¼Œæ¯”å¦‚ <code>alpine:latest</code> ä¸ºä¾‹ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹è¯¥é•œåƒæ‰€åŒ…å«çš„è½¯ä»¶ç»„ä»¶ä¿¡æ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ syft packages alpine:latest
New version of syft is available: 0.36.0
 âœ” Loaded image
 âœ” Parsed image
 âœ” Cataloged packages      [14 packages]

NAME                    VERSION      TYPE
alpine-baselayout       3.2.0-r16    apk
alpine-keys             2.4-r0       apk
apk-tools               2.12.7-r0    apk
busybox                 1.33.1-r6    apk
ca-certificates-bundle  20191127-r5  apk
libc-utils              0.7.2-r3     apk
libcrypto1.1            1.1.1l-r0    apk
libretls                3.3.3p1-r2   apk
libssl1.1               1.1.1l-r0    apk
musl                    1.2.2-r3     apk
musl-utils              1.2.2-r3     apk
scanelf                 1.3.2-r0     apk
ssl_client              1.33.1-r6    apk
zlib                    1.2.11-r3    apk
</code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ°ä¸Šè¿°å‘½ä»¤åˆ—å–å‡ºäº† alpine:latest ä¸­æ‰€åŒ…å«çš„è½¯ä»¶ç»„å»ºä¿¡æ¯ï¼ŒåŒ…æ‹¬ç»„ä»¶åç§°ã€ç‰ˆæœ¬ä¿¡æ¯ã€ç±»å‹ç­‰ç­‰ã€‚å¦‚æœè¦ç”ŸæˆæŸç§æ ¼å¼çš„è½¯ä»¶ç‰©æ–™æ¸…å•ï¼Œåˆ™ç›´æ¥ç”¨ <code>-o</code> æŒ‡å®šè¦è¾“å‡ºçš„ç‰¹å®šæ ¼å¼å³å¯ã€‚ä¸‹é¢ç”¨ä¸€ä¸ª log4j çš„æ¡ˆä¾‹æ¥å®é™…æ“ä½œå¹¶åˆ†æã€‚</p><p>ä¸‹é¢ä»¥ Demo Repo <a href=https://github.com/majinghe/java-maven-hello-world-4-log4j2.git>https://github.com/majinghe/java-maven-hello-world-4-log4j2.git</a> ä¸ºä¾‹æ¥å±•ç¤ºï¼Œå¦‚ä½•é€šè¿‡ SBOM çš„æ–¹å¼å‘ç°è½¯ä»¶ç»„ä»¶ä¸­æ˜¯å¦åŒ…å« log4j æ¼æ´ã€‚ä»£ç åº“çš„ç›®å½•å¦‚ä¸‹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java
            â””â”€â”€ com
                â””â”€â”€ example
                    â””â”€â”€ hello
                        â””â”€â”€ Hello.java
</code></pre></td></tr></table></div></div><p>å…³äº log4j çš„ä¿¡æ¯åœ¨ pom.xml ä¸­æœ‰å¦‚ä¸‹æè¿°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>&lt;dependencies&gt;
        &lt;dependency&gt;
        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
        &lt;version&gt;2.11.0&lt;/version&gt;
        &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre></td></tr></table></div></div><p>æ¥ä¸‹æ¥å¯ä»¥ç›´æ¥ç”¨ docker build å‘½ä»¤æ¥æ„å»ºä¸€ä¸ªé•œåƒï¼Œéšåç”¨ syft åˆ—å–è¯¥é•œåƒä¸­çš„è½¯ä»¶ç»„ä»¶ä¿¡æ¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ syft packages dllhb/tekton-sbom:0.0.1
New version of syft is available: 0.36.0
 âœ” Loaded image
 âœ” Parsed image
 âœ” Cataloged packages      [273 packages]

NAME                               VERSION                         TYPE
CodePointIM                        11.0.13                         java-archive
FileChooserDemo                    11.0.13                         java-archive
Font2DTest                         11.0.13                         java-archive
J2Ddemo                            11.0.13                         java-archive

.......... å¤ªé•¿äº†ï¼Œåªä¿ç•™éƒ¨åˆ†ç”¨æˆ·è¯´æ˜çš„å†…å®¹..........

libzstd1                           1.4.8+dfsg-2.1                  deb
log4j-api                          2.11.0                          java-archive
log4j-core                         2.11.0                          java-archive
login                              1:4.8.1-1                       deb
logsave                            1.46.2-2                        deb
lsb-base                           11.1.0                          deb
maven-aether-provider              3.0                             java-archive
maven-archiver                     3.1.1                           java-archive
</code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ°ä¸Šé¢æœ‰ä¸ log4j æœ‰å…³çš„ä¿¡æ¯ï¼ˆlog4j-api å’Œ log4j-coreï¼‰ï¼Œç‰ˆæœ¬æ˜¯ 2.11.0ï¼ˆæ ¹æ® CVE æˆ– NVD å®˜ç½‘ä¿¡æ¯ï¼Œ2.11.0 æ˜¯å­˜åœ¨å®‰å…¨æ¼æ´çš„ï¼‰ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”Ÿæˆä¸åŒæ ¼å¼çš„ SBOMï¼Œæ¯”å¦‚ä»¥ spdxï¼ˆSoftware Package Data Exchange ï¼‰æ ¼å¼ä¸ºä¾‹ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆ SBOMï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ syft packages dllhb/tekton-sbom:0.0.1 -o spdx
New version of syft is available: 0.36.0
 âœ” Loaded image
 âœ” Parsed image
 âœ” Cataloged packages      [273 packages]
SPDXVersion: SPDX-2.2
DataLicense: CC0-1.0
SPDXID: SPDXRef-DOCUMENT
DocumentName: dllhb/tekton-sbom:0.0.1
DocumentNamespace: https://anchore.com/syft/image/dllhb/tekton-sbom:0.0.1
LicenseListVersion: 3.14
Creator: Organization: Anchore, Inc
Creator: Tool: syft-0.21.0
Created: 2022-01-25T05:21:53Z

.......... å¤ªé•¿äº†ï¼Œåªåˆ—å–ä¸ log4j æœ‰å…³çš„ä¿¡æ¯ ..........

##### Package: log4j-api

PackageName: log4j-api
SPDXID: SPDXRef-Package-java-archive-log4j-api
PackageVersion: 2.11.0
PackageDownloadLocation: NOASSERTION
FilesAnalyzed: false
PackageLicenseConcluded: NONE
PackageLicenseDeclared: NONE
PackageCopyrightText: NOASSERTION
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j_api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j-api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j-api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j_api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j-api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j_api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j-api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j_api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j_api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j-api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j-api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j_api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j-api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j_api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j_api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j-api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j_api:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j-api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j-api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j_api:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j_api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j-api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j-api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j_api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j_api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j-api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j_api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j-api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j-api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j_api:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-api:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_api:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: PACKAGE_MANAGER purl pkg:maven/org.apache.logging.log4j/log4j-api@2.11.0

##### Package: log4j-core

PackageName: log4j-core
SPDXID: SPDXRef-Package-java-archive-log4j-core
PackageVersion: 2.11.0
PackageDownloadLocation: NOASSERTION
FilesAnalyzed: false
PackageLicenseConcluded: NONE
PackageLicenseDeclared: NONE
PackageCopyrightText: NOASSERTION
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j_core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j-core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j-core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j_core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j_core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j-core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j-core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j_core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j_core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j-core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j_core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j-core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j-core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j_core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j_core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j_core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j-core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j-core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j_core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j_core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j-core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j-core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j-core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j_core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:core:2.11.0:*:*:*:*:maven:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:core:2.11.0:*:*:*:*:java:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j_core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j-core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j_core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j-core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j-core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j_core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j_core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j-core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j_core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j-core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j_core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j-core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j-core:core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j_core:core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸logging:core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸apache:core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:log4j:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸log4j:core:2.11.0:*:*:*:*:*:*:*
ExternalRef: SECURITY cpe23Type cpe:2.3ğŸ…°ï¸core:core:2.11.0:*:*:*:*:*:*:*
ExternalRef: PACKAGE_MANAGER purl pkg:maven/org.apache.logging.log4j/log4j-core@2.11.0
</code></pre></td></tr></table></div></div><p>ä¸Šè¿° SBOM æ˜¯ä»¥ spdx æ ¼å¼ç”Ÿæˆçš„ï¼Œè¯¦ç»†è¯­æ³•å¯ä»¥æŸ¥é˜…<a href=https://spdx.dev/wp-content/uploads/sites/41/2017/12/spdx_onepager.pdf>SPDX å®˜ç½‘</a>æˆ–æœ¬ç«™çš„å¦å¤–ä¸€ç¯‡åšæ–‡<a href=https://majinghe.github.io/Cloud-Native-DevSecOps/devsecops/sbom/>ä» Anchore è½¯ä»¶ä¾›åº”é“¾å®‰å…¨æŠ¥å‘Šæ·±æŒ– SBOM & SPDX</a>ã€‚</p><h2 id=å°†-sbom-çš„ç”ŸæˆåµŒå…¥åˆ°-cicd-ä¸­>å°† SBOM çš„ç”ŸæˆåµŒå…¥åˆ° CI/CD ä¸­</h2><p>é‚£å¦‚ä½•åœ¨æ¯æ¬¡è½¯ä»¶ä»£ç æœ‰å˜æ›´çš„æ—¶å€™åŠæ—¶ç”Ÿæˆ SBOM å‘¢ï¼Ÿæœ€å¥½çš„åŠæ³•å°±æ˜¯å°† SBOM çš„ç”Ÿæˆç›´æ¥åµŒå…¥åˆ° CI/CD æµç¨‹ä¸­ã€‚ä¸‹é¢æ¼”ç¤ºå¦‚ä½•å°† SBOM çš„ç”ŸæˆåµŒå…¥åˆ°ä»¥ Tekton ä¸ºæ„å»ºå¼•æ“çš„ CI/CD Pipeline ä¸­ã€‚</p><h3 id=tekton>Tekton</h3><p>Tekton æ˜¯è°·æ­Œå¼€æºçš„ä¸€æ¬¾äº‘åŸç”Ÿ CI/CD æ„å»ºå·¥å…·ï¼Œé‡‡ç”¨å£°æ˜å¼çš„æ–¹å¼æ¥å®Œæˆ CI/CD Pipeline çš„æ„å»ºã€‚æ¶æ„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p><p><img src=images/tekton-arch.png alt=tekton-arch></p><p>Tekton å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸¤å¤§å—ï¼šEvent Handler & Pipeline Handlerã€‚Event Handler ä¸»è¦æ˜¯æ¥å— SCM ç³»ç»Ÿçš„äº‹ä»¶æ¶ˆæ¯ï¼ˆå¦‚ä»£ç å˜æ›´ï¼‰ï¼Œç„¶ååšä¸€äº›å¤„ç†ï¼Œè·å–å¿…è¦çš„ä¿¡æ¯ï¼ˆä»£ç æäº¤è€…ã€æäº¤å†…å®¹ç­‰ï¼‰ï¼Œç„¶åæŠŠè¿™äº›å†…å®¹å½“ä½œè¾“å…¥ï¼ˆInputï¼‰ä¼ é€’åˆ° Pipeline Handler éƒ¨åˆ†ï¼ŒPipeline Handler ä¼šæ ¹æ®ç”¨äºè‡ªå®šä¹‰çš„æµç¨‹ï¼ˆå¦‚å®Œæˆæºç åˆ°é•œåƒçš„è½¬æ¢ï¼‰æ¥å®Œæˆæ•´ä¸ª CI/CD æ„å»ºã€‚</p><p>å¯¹äº Pipeline Handler éƒ¨åˆ†ï¼Œæœ‰å‡ ä¸ªæ¦‚å¿µéœ€è¦äº†è§£ä¸€ä¸‹ï¼š</p><ul><li><p><strong>Step</strong>ï¼šStep æ˜¯ Tekton æœ€åŸºæœ¬çš„æ“ä½œå•å…ƒï¼Œæ¯ä¸€ä¸ª Step å°±æ˜¯ç”¨ç‰¹å®šçš„æ„å»ºå·¥å…·æ¥ç”¨ç‰¹å®šçš„è¾“å…¥ï¼ˆInputï¼‰ç”Ÿæˆç‰¹å®šè¾“å‡ºï¼ˆOutputï¼‰çš„è¿‡ç¨‹ï¼Œä¸Šä¸€ä¸ª Step çš„è¾“å‡ºå¯ä»¥ä½œä¸ºä¸‹ä¸€ä¸ª Step çš„è¾“å…¥ã€‚Step æ˜¯åœ¨ç”±ç”¨æˆ·æä¾›çš„å®¹å™¨é•œåƒæ‹‰èµ·çš„å®¹å™¨é‡Œé¢å®Œæˆå·¥ä½œçš„ï¼›</p></li><li><p><strong>Task</strong>ï¼šTask æ˜¯ä¸€ç³»åˆ— Step çš„æœ‰åºé›†åˆã€‚Task æ˜¯åœ¨ Kubernetes pod é‡Œé¢å®Œæˆå·¥ä½œçš„ï¼›è€Œ Step æ˜¯ pod çš„å•ä¸ªå®¹å™¨ä¸­å®Œæˆå·¥ä½œçš„ï¼›</p></li><li><p><strong>TaskRun</strong>ï¼šTaskRun æ˜¯ Task çš„å…·ä½“æ‰§è¡Œã€‚æ¯æ¬¡åˆ›å»ºä¸€ä¸ª TaskRun å°±ä¼šæœ‰ä¸€ä¸ªæŒ‡å®šçš„ Task å¼€å§‹è¿è¡Œã€‚TaskRun å¯ä»¥å•ç‹¬è¿è¡Œï¼Œä¹Ÿå¯ä»¥è¢«åµŒå…¥åˆ° PipelineRun ä¸­ï¼›</p></li><li><p><strong>Pipeline</strong>ï¼šPipeline æ˜¯ä¸€ç³»åˆ— Task çš„æœ‰åºé›†åˆã€‚Tekton ä¼šæ”¶é›†æ‰€æœ‰çš„ tasksï¼Œå°†å®ƒä»¬é“¾æ¥æˆä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆdirected acyclic graphï¼Œå³ DAGï¼‰ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚Pipeline çš„æ‰§è¡Œä¼šç”Ÿæˆä¸€ç³»åˆ— podã€‚</p></li><li><p><strong>PipelineRun</strong>ï¼šPipelineRun æ˜¯ Pipeline çš„å…·ä½“æ‰§è¡Œã€‚æ¯æ¬¡åˆ›å»ºä¸€ä¸ª PipelineRun å°±ä¼šæœ‰ä¸€ä¸ªæŒ‡å®šçš„ Pipeline å¼€å§‹è¿è¡Œã€‚</p></li><li><p><strong>PipelineResource</strong>ï¼šPipelineResourceï¼Œä¸»è¦ç”¨æ¥å®šä¹‰ Step éœ€è¦çš„è¾“å…¥ï¼ˆInputï¼‰ä»¥åŠç›¸åº”çš„è¾“å‡ºï¼ˆOutputï¼‰ã€‚</p></li></ul><p>ä¸‹é¢å°±æ¼”ç¤ºå¦‚ä½•å°† SBOM çš„ç”ŸæˆåµŒå…¥åˆ° CI/CD ä¸­ã€‚</p><h3 id=å°†-sbom-çš„ç”ŸæˆåµŒå…¥-tekton-çš„-cicd-ä¸­>å°† SBOM çš„ç”ŸæˆåµŒå…¥ Tekton çš„ CI/CD ä¸­</h3><p>ä¸‹å›¾æ˜¯ä»¥ Tekton ä¸ºæ„å»ºå¼•æ“çš„ä¸€ä¸ª CI/CD Pipelineï¼Œä»æºç æäº¤åˆ°ä»£ç æ„å»ºã€é•œåƒæ‰“åŒ…ï¼Œå†åˆ©ç”¨ ArgoCD æ¥å®ç° GitOpsã€‚åœ¨é•œåƒæ„å»ºä¹‹ååšäº†ä¸€ä¸ª SBOM çš„ç”Ÿæˆã€‚å½“ç„¶ï¼Œå¦‚æœæœ‰éœ€æ±‚ï¼Œå¯ä»¥æŠŠç”Ÿæˆçš„ SBOM å¯ä»¥å‘é€åˆ° slack æˆ–è€…å’Œæºä»£ç æ‰˜ç®¡å¹³å°é›†æˆèµ·æ¥ï¼Œæ–¹ä¾¿ SBOM çš„æŸ¥çœ‹ã€‚</p><p><img src=images/tekton-sbom.png alt=tekton-sbom></p><p>æ•´ä¸ªæ¼”ç¤ºæ‰€ç”¨çš„ Tekton yaml Repo å¯ä»¥åœ¨<a href=https://github.com/majinghe/tekton-chains-demo>è¿™å„¿</a>æ‰¾åˆ°ã€‚å°† SBOM çš„ç”ŸæˆåµŒå…¥åˆ° CI/CD ä¸­ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåœ¨ Tekton çš„ <code>Task</code> ä¸­å¢åŠ ä¸€ä¸ª <code>Step</code>ï¼Œå¦‚ä¸‹å†…å®¹ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>- name: sbom-generate
    image: anchore/syft:latest
    env:
    - name: DOCKER_CONFIG
        value: /config
    volumeMounts:
    - mountPath: /config
    name: registry-config
    readOnly: true
    args:
    - dllhb/tekton-sbom:0.0.1
    - -o
    - spdx
volumes:
- name: registry-config
secret:
    secretName: registry-config
</code></pre></td></tr></table></div></div><p>å¦‚æœæ˜¯ Private Registryï¼Œéœ€è¦æŠŠ <code>config.json</code> ç”¨ Secret çš„å½¢å¼åˆ›å»ºå¥½ï¼Œç„¶åä»¥ <code>volume</code> çš„å½¢å¼æŒ‚åœ¨åˆ° Tekton çš„ pod é‡Œé¢ã€‚</p><p>æ¥ç€åˆ›å»º <code>Task</code> å’Œ <code>TaskRun</code> å³å¯ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl create ns tekton-sbom
$ kubectl -n tekton-sbom apply -f secret-credentials.yaml
$ kubectl -n tekton-sbom apply -f sa.yaml
$ kubectl -n tekton-sbom apply -f pipelineresource.yaml
$ kubectl -n tekton-sbom apply -f task.yaml
$ kubectl -n tekton-sbom apply -f taskrun.yaml
</code></pre></td></tr></table></div></div><p>å…³äºä¸Šè¿° yaml æ–‡ä»¶çš„ä½œç”¨ä»¥åŠå†…å®¹å¯ä»¥åœ¨<a href=https://github.com/majinghe/tekton-chains-demo>Tekton ä½¿ç”¨ Repo</a>æŸ¥é˜…ã€‚</p><p>æœ€åå¯ä»¥æŸ¥çœ‹ <code>Task</code> å’Œ <code>TaksRun</code>ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ tkn -n tekton-sbom t list
NAME                 DESCRIPTION   AGE
build-docker-image                 2 hours ago

$ tkn -n tekton-sbom tr list
NAME                     STARTED       DURATION     STATUS
build-docker-image-run   2 hours ago   10 minutes   Succeeded
</code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ° TaskRunï¼ˆç®€å†™ä¸º trï¼‰çš„ STATUS ä¸º Succeededï¼ŒæŸ¥çœ‹ <code>tekton-sbom</code> namespace ä¸‹é¢çš„podï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl -n tekton-sbom get pods
NAME                         READY   STATUS             RESTARTS   AGE
build-docker-image-run-pod   0/4     Completed          0          169m
</code></pre></td></tr></table></div></div><p>å¯ä»¥æŸ¥çœ‹ <code>log</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>$ kubectl -n tekton-sbom logs -f build-docker-image-run-pod -c step-sbom-generate
</code></pre></td></tr></table></div></div><p>å¯ä»¥æŸ¥çœ‹åˆ°ä¸ SBOM ç« èŠ‚ä¸­ç›¸åŒçš„å†…å®¹ï¼Œç”±äºå†…å®¹è¿‡é•¿ï¼Œä¸åœ¨è¿™å„¿å†æ¬¡èµ˜è¿°ã€‚</p><p>å°† SBOM çš„ç”ŸæˆåµŒå…¥åˆ° CI/CD ä¸­ï¼Œåˆ™æ¯æ¬¡ä»£ç å˜æ›´éƒ½ä¼šç”Ÿæˆæ–°çš„ SBOMï¼Œèƒ½å¤Ÿä¿è¯ SBOM çš„å‡†ç¡®æ€§ã€‚</p></div><div class=post-copyright><p class=copyright-item><span class=item-title>æ–‡ç« ä½œè€…</span>
<span class=item-content>é©¬æ™¯è´ºï¼ˆå°é©¬å“¥ï¼‰</span></p><p class=copyright-item><span class=item-title>ä¸Šæ¬¡æ›´æ–°</span>
<span class=item-content>2022-02-08</span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/software-supply-chain-security/>Software Supply Chain Security</a>
<a href=/tags/sbom/>SBOM</a>
<a href=/tags/tekton/>Tekton</a></div><nav class=post-nav><a class=prev href=/devsecops/manifesto/><i class="iconfont icon-left"></i><span class="prev-text nav-default">DevSecOps å®£è¨€</span>
<span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span></a>
<a class=next href=/devsecops/sbom-report/><span class="next-text nav-default">ã€Šè½¯ä»¶ç‰©æ–™æ¸…å•ä¸ç½‘ç»œå®‰å…¨å¯è¯»æ€§ã€‹è°ƒç ”æŠ¥å‘Šè§£è¯»</span>
<span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=devops008@sina.com class="iconfont icon-email" title=email></a><a href=https://github.com/majinghe class="iconfont icon-github" title=github></a><a href=https://majinghe.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>ç”± <a class=hexo-link href=https://gohugo.io>Hugo</a> å¼ºåŠ›é©±åŠ¨</span>
<span class=division>|</span>
<span class=theme-info>ä¸»é¢˜ -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2020 -
2022<span class=heart><i class="iconfont icon-heart"></i></span><span>olOwOlo</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','G-T0B2C6W2ZH','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>